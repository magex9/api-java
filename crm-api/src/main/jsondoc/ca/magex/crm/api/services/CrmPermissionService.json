{
  "name": "CrmPermissionService",
  "package": "ca.magex.crm.api.services",
  "imports": {
    "List": "java.util",
    "Collectors": "java.util.stream",
    "NotNull": "javax.validation.constraints",
    "GroupsFilter": "ca.magex.crm.api.filters",
    "Paging": "ca.magex.crm.api.filters",
    "RolesFilter": "ca.magex.crm.api.filters",
    "Group": "ca.magex.crm.api.roles",
    "Role": "ca.magex.crm.api.roles",
    "FilteredPage": "ca.magex.crm.api.system",
    "Identifier": "ca.magex.crm.api.system",
    "Localized": "ca.magex.crm.api.system",
    "Status": "ca.magex.crm.api.system"
  },
  "type": "interface",
  "modifiers": ["public"],
  "methods": [
    {
      "name": "prototypeGroup",
      "modifiers": ["default"],
      "type": "Group",
      "parameters": [{
        "name": "name",
        "type": "Localized",
        "annotations": [{"name": "NotNull"}]
      }],
      "body": "{\n    return new Group(null, Status.PENDING, name);\n}"
    },
    {
      "name": "createGroup",
      "modifiers": ["default"],
      "type": "Group",
      "parameters": [{
        "name": "group",
        "type": "Group",
        "annotations": [{"name": "NotNull"}]
      }],
      "body": "{\n    return createGroup(group.getName());\n}"
    },
    {
      "name": "createGroup",
      "type": "Group",
      "parameters": [{
        "name": "name",
        "type": "Localized",
        "annotations": [{"name": "NotNull"}]
      }]
    },
    {
      "name": "findGroup",
      "type": "Group",
      "parameters": [{
        "name": "groupId",
        "type": "Identifier",
        "annotations": [{"name": "NotNull"}]
      }]
    },
    {
      "name": "findGroupByCode",
      "modifiers": ["default"],
      "type": "Group",
      "parameters": [{
        "name": "code",
        "type": "String",
        "annotations": [{"name": "NotNull"}]
      }],
      "body": "{\n    return findGroups(defaultGroupsFilter().withCode(code), GroupsFilter.getDefaultPaging()).getSingleItem();\n}"
    },
    {
      "name": "updateGroupName",
      "type": "Group",
      "parameters": [
        {
          "name": "groupId",
          "type": "Identifier",
          "annotations": [{"name": "NotNull"}]
        },
        {
          "name": "name",
          "type": "Localized",
          "annotations": [{"name": "NotNull"}]
        }
      ]
    },
    {
      "name": "enableGroup",
      "type": "Group",
      "parameters": [{
        "name": "groupId",
        "type": "Identifier",
        "annotations": [{"name": "NotNull"}]
      }]
    },
    {
      "name": "disableGroup",
      "type": "Group",
      "parameters": [{
        "name": "groupId",
        "type": "Identifier",
        "annotations": [{"name": "NotNull"}]
      }]
    },
    {
      "name": "defaultGroupsFilter",
      "modifiers": ["default"],
      "type": "GroupsFilter",
      "body": "{\n    return new GroupsFilter();\n}"
    },
    {
      "name": "findGroups",
      "type": {
        "class": "FilteredPage",
        "generics": ["Group"]
      },
      "parameters": [
        {
          "name": "filter",
          "type": "GroupsFilter",
          "annotations": [{"name": "NotNull"}]
        },
        {
          "name": "paging",
          "type": "Paging",
          "annotations": [{"name": "NotNull"}]
        }
      ]
    },
    {
      "name": "findGroups",
      "modifiers": ["default"],
      "type": {
        "class": "FilteredPage",
        "generics": ["Group"]
      },
      "parameters": [{
        "name": "filter",
        "type": "GroupsFilter",
        "annotations": [{"name": "NotNull"}]
      }],
      "body": "{\n    return findGroups(filter, defaultGroupPaging());\n}"
    },
    {
      "name": "findActiveGroupCodes",
      "modifiers": ["default"],
      "type": {
        "class": "List",
        "generics": ["String"]
      },
      "body": "{\n    return findGroups(defaultGroupsFilter().withStatus(Status.ACTIVE), GroupsFilter.getDefaultPaging().allItems()).stream().map(g -> g.getCode()).collect(Collectors.toList());\n}"
    },
    {
      "name": "prototypeRole",
      "modifiers": ["default"],
      "type": "Role",
      "parameters": [
        {
          "name": "groupId",
          "type": "Identifier",
          "annotations": [{"name": "NotNull"}]
        },
        {
          "name": "name",
          "type": "Localized",
          "annotations": [{"name": "NotNull"}]
        }
      ],
      "body": "{\n    return new Role(null, groupId, Status.PENDING, name);\n}"
    },
    {
      "name": "createRole",
      "modifiers": ["default"],
      "type": "Role",
      "parameters": [{
        "name": "role",
        "type": "Role",
        "annotations": [{"name": "NotNull"}]
      }],
      "body": "{\n    return createRole(role.getGroupId(), role.getName());\n}"
    },
    {
      "name": "createRole",
      "type": "Role",
      "parameters": [
        {
          "name": "groupId",
          "type": "Identifier",
          "annotations": [{"name": "NotNull"}]
        },
        {
          "name": "name",
          "type": "Localized",
          "annotations": [{"name": "NotNull"}]
        }
      ]
    },
    {
      "name": "findRole",
      "type": "Role",
      "parameters": [{
        "name": "roleId",
        "type": "Identifier",
        "annotations": [{"name": "NotNull"}]
      }]
    },
    {
      "name": "findRoleByCode",
      "modifiers": ["default"],
      "type": "Role",
      "parameters": [{
        "name": "code",
        "type": "String",
        "annotations": [{"name": "NotNull"}]
      }],
      "body": "{\n    return findRoles(defaultRolesFilter().withCode(code), RolesFilter.getDefaultPaging()).getSingleItem();\n}"
    },
    {
      "name": "updateRoleName",
      "type": "Role",
      "parameters": [
        {
          "name": "roleId",
          "type": "Identifier",
          "annotations": [{"name": "NotNull"}]
        },
        {
          "name": "name",
          "type": "Localized",
          "annotations": [{"name": "NotNull"}]
        }
      ]
    },
    {
      "name": "enableRole",
      "type": "Role",
      "parameters": [{
        "name": "roleId",
        "type": "Identifier",
        "annotations": [{"name": "NotNull"}]
      }]
    },
    {
      "name": "disableRole",
      "type": "Role",
      "parameters": [{
        "name": "roleId",
        "type": "Identifier",
        "annotations": [{"name": "NotNull"}]
      }]
    },
    {
      "name": "findRoles",
      "type": {
        "class": "FilteredPage",
        "generics": ["Role"]
      },
      "parameters": [
        {
          "name": "filter",
          "type": "RolesFilter",
          "annotations": [{"name": "NotNull"}]
        },
        {
          "name": "paging",
          "type": "Paging",
          "annotations": [{"name": "NotNull"}]
        }
      ]
    },
    {
      "name": "findRoles",
      "modifiers": ["default"],
      "type": {
        "class": "FilteredPage",
        "generics": ["Role"]
      },
      "parameters": [{
        "name": "filter",
        "type": "RolesFilter",
        "annotations": [{"name": "NotNull"}]
      }],
      "body": "{\n    return findRoles(filter, defaultRolePaging());\n}"
    },
    {
      "name": "findRoles",
      "modifiers": ["default"],
      "type": {
        "class": "List",
        "generics": ["Role"]
      },
      "body": "{\n    return findRoles(defaultRolesFilter(), RolesFilter.getDefaultPaging().allItems()).getContent();\n}"
    },
    {
      "name": "findActiveRoleCodesForGroup",
      "modifiers": ["default"],
      "type": {
        "class": "List",
        "generics": ["String"]
      },
      "parameters": [{
        "name": "group",
        "type": "String"
      }],
      "body": "{\n    return findRoles(defaultRolesFilter().withStatus(Status.ACTIVE).withGroupId(findGroupByCode(group).getGroupId()), RolesFilter.getDefaultPaging().allItems()).stream().map(r -> r.getCode()).collect(Collectors.toList());\n}"
    },
    {
      "name": "defaultRolesFilter",
      "modifiers": ["default"],
      "type": "RolesFilter",
      "body": "{\n    return new RolesFilter();\n}"
    },
    {
      "name": "defaultGroupPaging",
      "modifiers": ["default"],
      "type": "Paging",
      "body": "{\n    return new Paging(GroupsFilter.getSortOptions().get(0));\n}"
    },
    {
      "name": "defaultRolePaging",
      "modifiers": ["default"],
      "type": "Paging",
      "body": "{\n    return new Paging(RolesFilter.getSortOptions().get(0));\n}"
    }
  ]
}